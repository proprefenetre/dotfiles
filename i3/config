# i3 config file (v4) 
# Please see http://i3wm.org/docs/userguide.html for a complete reference!

# modifiers
set $mod Mod4
set $alt Mod4
set $ctrl Control

# Font for window titles. Will also be used by the bar
# unless a different font is used in the bar {} block below.
# font pango: Hack Regular 6
font pango: Dejavu Sans 7

hide_edge_borders both
new_window pixel 1
default_orientation vertical

set $ws1 workspace 1
set $ws2 workspace 2
set $ws3 workspace 3
set $ws4 workspace 4
set $ws5 workspace 5
set $ws6 workspace 6
set $ws7 workspace 7
set $ws8 workspace 8
set $ws9 workspace 9
set $ws0 workspace 0

# Use Mouse+$mod to drag floating windows to their wanted position
floating_modifier $mod

# launching
set $browser chromium
set $term urxvtc 
set $backup_term xterm

bindsym $mod+Return exec --no-startup-id $term
bindsym $ctrl+Shift+Return exec --no-startup-id gmrun
bindsym $mod+Shift+Return exec --no-startup-id $backup_term
bindsym $mod+Shift+u exec --no-startup-id $term -name scratch
bindsym $mod+Shift+comma exec --no-startup-id ~/bin/passmenu
bindsym $mod+g exec emacs

# stuff

# take a screenshot
bindsym $mod+shift+d exec --no-startup-id scrot -e 'mv $f ~/pics/'

# kill focused window
bindsym $mod+Shift+c kill

# change focus
bindsym $mod+d focus left
bindsym $mod+h focus down
bindsym $mod+t focus up
bindsym $mod+n focus right

bindsym $mod+b focus mode_toggle

bindsym $mod+p focus parent
bindsym $mod+Shift+p focus child

bindsym $mod+w focus output left

bindsym $alt+Tab [con_mark=_last] focus 

# split in horizontal orientation
bindsym $mod+Shift+h split h

# split in vertical orientation
bindsym $mod+Shift+v split v

# enter fullscreen mode for the focused container
bindsym $mod+y fullscreen toggle

# change container layout (stacked, tabbed, toggle split)
bindsym $mod+apostrophe layout stacking
bindsym $mod+comma layout tabbed
bindsym $mod+period layout toggle split

# change between tiling / floating windows
bindsym $mod+Shift+space floating toggle

# switch to workspace
bindsym $mod+0 $ws0
bindsym $mod+1 $ws1
bindsym $mod+2 $ws2
bindsym $mod+3 $ws3
bindsym $mod+4 $ws4
bindsym $mod+5 $ws5
bindsym $mod+6 $ws6
bindsym $mod+7 $ws7
bindsym $mod+8 $ws8
bindsym $mod+9 $ws9

# gesture: pinch out	xdotool key super+s
# move focused container to workspace
bindsym $mod+Shift+1 move $ws1; $ws1
bindsym $mod+Shift+2 move $ws2; $ws2
bindsym $mod+Shift+3 move $ws3; $ws3
bindsym $mod+Shift+4 move $ws4; $ws4
bindsym $mod+Shift+5 move $ws5; $ws5
bindsym $mod+Shift+6 move $ws6; $ws6
bindsym $mod+Shift+7 move $ws7; $ws7
bindsym $mod+Shift+8 move $ws8; $ws8
bindsym $mod+Shift+9 move $ws9; $ws9
bindsym $mod+Shift+0 move $ws0; $ws0

workspace_auto_back_and_forth yes
bindsym $mod+semicolon workspace prev
bindsym $mod+q workspace next
bindsym $mod+j workspace back_and_forth

bindsym $mod+Shift+W move workspace to output left

# scratchpad
bindsym $mod+u [instance="^scratch$"] scratchpad show
for_window [instance="^scratch$"] move scratchpad
for_window [instance="^scratch$"] floating enable
for_window [class="^Spotify$"] move $ws0

# assignments
assign [class="^[Cc]hromium$"] 1
assign [class="^google-chrome$"] 1
assign [class="^Vivaldi-stable$"] 1
assign [class="^Firefox$"]  1
assign [class="^Steam"] 2
assign [class="^Spotify$"] 0

# window rules
for_window [class="^Dialog"] floating enable
for_window [instance=".*Properties"] floating enable
for_window [class="^Pinentry"] floating enable

# resize window (you can also use the mouse for that)
set $resize "resize"
mode $resize {

    bindsym d resize grow left 10 px
    bindsym Shift+d resize shrink left 10 px
    bindsym h resize grow down 10 px
    bindsym Shift+h resize shrink down 10 px
    bindsym t resize grow up 10 px
    bindsym Shift+t resize shrink up 10 px
    bindsym n resize grow right 10 px
    bindsym Shift+n resize shrink right 10 px


    bindsym Escape mode "default"
    bindsym Return mode "default"
}
bindsym $mod+r mode $resize

set $move "move window"
mode $move {
    
    bindsym d move left                
    bindsym h move down                
    bindsym t move up                
    bindsym n move right                
    
    # toggle tiling / floating
    bindsym p floating toggle

    bindsym Escape mode "default"
    bindsym Return mode "default"
}

bindsym $mod+m mode $move

set $locker /home/niels/bin/lock && sleep 1

set $meta "[l]ock, [k]ill X, res[t]art i3, [e]dit config, [r]eload config, [m]isc"
mode $meta {

    bindsym l exec --no-startup-id ~/bin/lock, mode "default"
    bindsym k exec --no-startup-id i3-msg exit, mode "default"
    bindsym t exec --no-startup-id i3-msg restart; mode "default"
    bindsym e exec emacs ~/.config/i3/config; mode "default"
    bindsym r exec --no-startup-id i3-msg reload; mode "default"

    bindsym m mode $launch

    bindsym Escape mode "default"
    bindsym Return mode "default"
}

bindsym $mod+Shift+apostrophe mode $meta

set $launch "launch"
mode $launch {
    bindsym w exec --no-startup-id $browser

    bindsym Escape mode "default"
    bindsym Return mode "default"
}

# Start i3bar to display a workspace bar (plus the system information i3status
# finds out, if available)
bar {
    status_command i3blocks
    position top
    font pango:Hack Regular, awesome 8
    colors {
        background #1c1c1c
        focused_workspace #0c8346 #0d5d56 #ffffff
        inactive_workspace #333333 #222222 #888888
        urgent_workspace   #712B31 #5D0D14 #ffffff

    }
}

# colors
# class                 border  backgr. text    indicator child_border
client.focused          #0c8346 #0d5d56 #ffffff #2e9ef4   #0d3c5d
client.focused_inactive #333333 #5f676a #ffffff #484e50   #0d3c5d
client.unfocused        #333333 #222222 #888888 #292d2e   #222222
client.urgent           #2f343a #900000 #ffffff #900000   #900000
client.placeholder      #000000 #0c0c0c #ffffff #000000   #0c0c0c

# Autostart
exec --no-startup-id $term -name scratch
exec --no-startup-id $browser
exec --no-startup-id emacs
