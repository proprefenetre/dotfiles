# -*- mode: Conf -*-

# make sxhkd reload its configuration files:
mod4 + Escape
    pkill -USR1 -x sxhkd

# terminal emulator
mod4 + Return
    st

mod4 + e
     ~/dotfiles/bspwm/scratchmacs

mod4 + u
     ~/dotfiles/bspwm/scratchterm

# set flags
mod4 + f; {m,l,s,p}
    bspc node -g {marked,locked,sticky,private}

# hide and restore  windows 
mod4 + {_,shift +} m
    {~/dotfiles/bspwm/hide -h,~/dotfiles/bspwm/hide -r}

# program launcher
mod4 + space ; {f,e,o,space,r,d}
     {firefox-developer-edition,emax,okular,dmenu_run -l 5,bspc desktop --rename $(rofi -dmenu -input /dev/null -p "New name: "),keeb -t}

## quit bspwm normally
mod1 + mod4 + {q,r}
     pkill -x panel; bspc {quit, wm -r}
    
## close
mod4 + {_,shift + }c
    bspc node -{c,k}

## set the window state
mod4 + s; {t,shift+t,f,shift+f}
    bspc node -t {tiled,pseudo_tiled,floating,fullscreen}

## set the node flags
mod4 + ctrl + {m,x,y,z,h}
    bspc node -g {marked,locked,sticky,private,hidden}

## Alternate between the tiled and monocle layout
mod4 + l
    bspc desktop -l next

## focus the node in the given direction
mod4 + {_,shift + }{d,h,t,n}
    bspc node --{focus,swap} {west,south,north,east}

mod4 + {_, shift} Tab
     bspc node @/ -C {forward,backward}
     
# swap node with biggest node on desktop
mod4 + g
    bspc node -s biggest.local

# focus the last node
mod4 + grave
    bspc node -f prev.local

# focus previous desktop
mod4 + z
    bspc desktop -f last

# focus the older or newer node in the focus history
mod4 + ctrl {_, shift +} u 
    bspc wm -h off; \
    bspc node {older,newer} -f; \
    bspc wm -h on

## focus or send to the given desktop
mod4 + {_,shift + } {1-9,0}
    bspc {desktop -f,node -d} '^{1-9,10}'

## preselect the direction
mod4 + ctrl + {d,h,t,n}
    bspc node -p {west,south,north,east}

## preselect the ratio
mod4 + ctrl + {1-9}
	bspc node -o 0.{1-9}

## cancel the preselection for the focused node
mod4 + ctrl + space
	bspc node -p cancel

## cancel the preselection for the focused desktop
mod4 + ctrl + shift + space
	bspc query -N -d | xargs -I id -n 1 bspc node id -p cancel


## rotate 90 deg
mod4 + {_,shift} + r
    bspc node @parent -R {90,270}

#3 Resize
# contract/expand side a
# vim keys
# ========
# l | d | u | r
# --+---+---+--
# h | j | k | l 
# d | h | t | n

# shrink
mod4 + alt + r : {h,t,d,n}
     bspc node {-z right -20 0 -z bottom 0 -20,-z right 20 0 -z bottom 0 20,-z left -20 0,-z right 20 0}

# expand one side
mod4 + shift + plus : {d,h,t,n}
     bspc node -z {left -10 0,bottom 0 10,top 0 -10,right 10 0}

mod4 + minus : {d,h,t,n}
     bspc node -z {left 10 0,bottom 0 -10,top 0 10,right -10 0}

# teleport floating windows
mod4 + semicolon; {a,o,e,u,semicolon}
     corner -{ul,ll,ur,lr,c}

# move a floating window
mod4 + alt + m : {Left,Down,Up,Right}
    bspc node -v {-20 0,0 20,0 -20,20 0}

# volume
{XF86AudioRaiseVolume,XF86AudioLowerVolume,XF86AudioMute}
    amixer set Master {1%+,1%-,toggle} 
  
